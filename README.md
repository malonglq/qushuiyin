# 智能去水印助手

一款基于微信小程序的智能去水印工具，支持传统上传和链接读取两种模式，能够自动识别并去除图片中的水印。

## 功能特点

### 🎯 双模式输入
- **传统上传**：支持相册选择和拍照上传
- **链接读取**：支持小红书、抖音、公众号等平台的图片链接解析

### 🤖 智能处理
- **自动识别**：AI自动检测水印位置和类型
- **多种算法**：提供轻柔、中等、强力三种处理强度
- **质量控制**：支持标准、高清、超清三种输出质量

### 📱 完整功能
- **批量处理**：支持多图片批量去水印
- **历史记录**：完整的处理历史管理和查看
- **结果预览**：原图与处理后图片对比查看
- **本地存储**：所有数据本地存储，保护隐私

## 技术架构

### 纯前端实现
- 无需后端服务器，完全在本地处理
- 使用Canvas API进行图像处理
- 集成WebAssembly + OpenCV.js进行计算机视觉处理

### 核心技术栈
- **微信小程序**：WXML/WXSS/JavaScript
- **Canvas API**：图像绘制和处理
- **OpenCV.js**：计算机视觉算法
- **IndexedDB**：本地数据存储
- **WebWorker**：性能优化

## 项目结构

```
4_wechat_qushuiyin/
├── app.js                 # 小程序入口文件
├── app.json               # 小程序配置文件
├── app.wxss               # 全局样式文件
├── sitemap.json           # 站点地图配置
├── pages/                 # 页面目录
│   ├── index/            # 首页
│   │   ├── index.js
│   │   ├── index.json
│   │   ├── index.wxml
│   │   └── index.wxss
│   ├── process/          # 处理页面
│   │   ├── process.js
│   │   ├── process.json
│   │   ├── process.wxml
│   │   └── process.wxss
│   ├── result/           # 结果页面
│   │   ├── result.js
│   │   ├── result.json
│   │   ├── result.wxml
│   │   └── result.wxss
│   ├── history/          # 历史页面
│   │   ├── history.js
│   │   ├── history.json
│   │   ├── history.wxml
│   │   └── history.wxss
│   └── settings/         # 设置页面
│       ├── settings.js
│       ├── settings.json
│       ├── settings.wxml
│       └── settings.wxss
├── utils/                 # 工具类目录
│   ├── imageProcessor.js  # 图片处理工具
│   ├── linkParser.js     # 链接解析工具
│   └── storageManager.js # 存储管理工具
└── images/               # 图片资源目录
```

## 安装和使用

### 开发环境要求
- 微信开发者工具
- Node.js 14+ (用于构建工具)

### 快速开始

1. **克隆项目**
```bash
git clone https://github.com/malonglq/qushuiyin.git
cd 4_wechat_qushuiyin
```

2. **打开微信开发者工具**
   - 导入项目目录
   - 选择小程序项目
   - 填写AppID（可以使用测试号）

3. **运行项目**
   - 点击编译按钮
   - 在模拟器中预览效果
   - 在真机中测试功能

### 主要功能使用

#### 1. 传统上传模式
- 点击"相册选择"从相册中选择图片
- 点击"拍照上传"使用相机拍照
- 选择图片后自动进入处理页面

#### 2. 链接读取模式
- 粘贴图片链接到输入框
- 点击"自动识别"开始解析
- 支持的平台：小红书、抖音、公众号、微博、B站等

#### 3. 处理设置
- 选择处理模式：自动识别或手动选择
- 调整处理强度：1-10级可选
- 选择输出质量：标准、高清、超清

#### 4. 查看结果
- 支持原图与处理后图片对比
- 可以保存到相册或分享给朋友
- 查看处理质量评分和时间统计

## 核心算法

### 水印检测
- 基于图像特征分析
- 支持多种水印类型识别
- 智能定位水印位置

### 去水印算法
- **轻柔修复**：适用于简单水印，保持原图质量
- **中等修复**：适用于一般水印，平衡效果和质量
- **强力修复**：适用于复杂水印，追求最佳去水印效果

### 图像优化
- 边缘保持滤波
- 对比度和亮度调整
- 噪点消除和锐化

## 性能优化

### 内存管理
- 大图片分块处理
- 及时释放内存资源
- 防止内存泄漏

### 处理优化
- 使用WebWorker进行后台处理
- 图片压缩和尺寸调整
- 缓存处理结果

### 用户体验
- 实时进度显示
- 处理状态提示
- 错误处理和重试机制

## 数据安全

### 隐私保护
- 所有处理在本地完成
- 不会上传任何用户数据
- 支持随时清理历史记录

### 数据存储
- 使用微信小程序本地存储
- 支持数据备份和恢复
- 提供存储空间管理

## 开发指南

### 添加新功能
1. 在相应页面目录中创建新文件
2. 更新app.json中的页面配置
3. 实现页面逻辑和样式
4. 集成到主流程中

### 自定义算法
1. 在utils/imageProcessor.js中添加新算法
2. 更新处理选项和UI
3. 测试算法效果
4. 优化性能表现

### 样式定制
- 修改app.wxss中的全局样式
- 调整各个页面的WXSS文件
- 遵循微信小程序设计规范

## 常见问题

### Q: 支持哪些图片格式？
A: 目前支持JPG、PNG、GIF、BMP、WEBP等常见格式。

### Q: 处理大图片会很慢吗？
A: 我们会自动调整图片大小以保证处理速度，通常10MB以内的图片都能快速处理。

### Q: 处理效果如何？
A: 效果取决于水印的复杂程度，简单水印基本可以完全去除，复杂水印会有明显改善。

### Q: 会消耗很多流量吗？
A: 不会，所有处理都在本地完成，不会消耗网络流量。

## 版本历史

### v1.0.0 (2025-08-24)
- 初始版本发布
- 支持基本去水印功能
- 实现双模式输入
- 完整的历史记录管理

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 许可证

MIT License - 详见LICENSE文件

## 联系方式

- 项目地址：https://github.com/malonglq/qushuiyin
- 问题反馈：通过GitHub Issues
- 邮箱：support@example.com

---

**智能去水印助手** - 让图片处理更简单！